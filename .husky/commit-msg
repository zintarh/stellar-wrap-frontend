#!/bin/sh


commit_msg_file="$1"
commit_msg="$(cat "$commit_msg_file")"

# Conventional-style commit regex:
# type(scope?): short summary
commit_regex='^(feat|fix|refactor|style|chore|docs|test)(\([a-z0-9-]+\))?!?: .+'

if ! printf '%s\n' "$commit_msg" | grep -Eq "$commit_regex"; then
  echo
  echo "âœ– Invalid commit message format."
  echo "  Expected: <type>(<scope>): <short summary>"
  echo "  Allowed types: feat, fix, refactor, style, chore, docs, test"
  echo "  Example: feat(connect): add freighter demo mode"
  echo
  exit 1
fi

